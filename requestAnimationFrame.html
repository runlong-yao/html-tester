<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <div
      id="animation"
      style="width: 100px; height: 100px; background-color: red"
    ></div>
  </body>
  <script>
    const element = document.getElementById("animation");
    let start, previousTimeStamp;
    let done = false;

    // function step(timeStamp) {
    //   console.log("execute animation");

    //   if (start === undefined) {
    //     start = timeStamp;
    //   }
    //   const elapsed = timeStamp - start;

    //   if (previousTimeStamp !== timeStamp) {
    //     // Math.min() is used here to make sure the element stops at exactly 200px
    //     const count = Math.min(0.1 * elapsed, 200);
    //     element.style.transform = `translateX(${count}px)`;
    //     if (count === 200) done = true;
    //   }

    //   if (elapsed < 2000) {
    //     // Stop the animation after 2 seconds
    //     previousTimeStamp = timeStamp;
    //     if (!done) {
    //       window.requestAnimationFrame(step);
    //     }
    //   }
    // }

    // window.requestAnimationFrame(step);
  </script>
  <script>
    let preTimeStamp;
    window.gaps = [];
    window.requestAnimationFrame(calTimeGap);
    function calTimeGap(timeStamp) {
      if (preTimeStamp) {
        const value = timeStamp - preTimeStamp;

        window.gaps.push(Math.round(value));
        //基本的会在14到18左右
        // console.log(value);
      }

      preTimeStamp = timeStamp;
      window.requestAnimationFrame(calTimeGap);
    }
  </script>
</html>
